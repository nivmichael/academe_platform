<!--<script type="text/ng-template" id="customTemplate.html">-->
  <!--<a style="float:left;">-->
      <!--<img ng-src="http://upload.wikimedia.org/wikipedia/commons/thumb/{{match.model.flag}}" width="16">-->
      <!--<div bind-html-unsafe="match.label | typeaheadHighlight:query"></div>-->
  <!--</a>-->
<!--</script>-->



<form id="registerForm" name="registerForm" novalidate>

<main ng-form="registerForm">

	<!--<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group" style="padding-left:30px;">-->
		<!--<div class="errors alert alert-danger col-xs-12 col-sm-5 col-md-5 col-lg-5" ng-if="errors">-->
			<!--<ul>-->
				<!--<li ng-repeat="(key,error) in errors track by $index">-->
					<!--{{error[0] }}-->
				<!--</li>-->
			<!--</ul>-->
		<!--</div>-->
	<!--</div>-->

	<div ng-if="sent && errors" class="errors alert alert-danger" >
		<div ng-repeat="(key,error) in errors track by $index" ng-if="registerForm[key].$name == key"  >
			<span ng-if="$first">Please Check the following :<br><br></span>

			- {{key | underscoreless | capitalize}}
		</div>
	</div>




<div ng-if="docParam == 'company'" >
	<div ng-repeat="(iterable_key, docParamValues) in user['company']">
		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group"  ng-repeat="(paramName, paramValues) in docParamValues | toArray:false | orderBy: 'position'" ng-if="paramValues.inputType && paramName != 'docParamId'">
			<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-label">
				{{paramValues.paramName | capitalize | underscoreless }}*
			</div>

			<div ng-switch="paramValues.inputType">

				<div ng-switch-when="checkbox">
					<div class="checkbox">
						<label>
							<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5 form-group">
								<input type='checkbox' class="form-control " name="{{param.paramName}}" placeholder="{{param.paramName}}" ng-model="user['company'][iterable_key][paramValues.paramId]['paramValue']"  required>
							</div>
						</label>
					</div>
				</div>

				<div ng-switch-when="text">
					<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5 form-group">
						<input type='text' class="form-control" name="{{param.paramName}}" placeholder="{{param.paramName}}"  ng-model="user['company'][iterable_key][paramValues.paramId]['paramValue']" required>
					</div>
				</div>

			</div>
		</div>
	</div>


	<!--<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group">-->
		<!-- -->
		<!--<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-label">-->
			<!--Company*-->
		<!--</div>-->
		<!-- -->
		<!--<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5 form-group" ng-class="{'has-error': registerForm.company_name.error}">-->
			<!--<input type='text' class="form-control " name="company_name" placeholder="Company Name" ng-model="user['company'][19]['paramValue']" required>-->
		<!--</div>-->
		<!-- -->
	<!--</div>	-->

	<!--<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group">-->
		<!--<div style="float:left;padding-left:15px;">-->
			<!--<input type='checkbox'>Hide company name-->
		<!--</div>-->

	<!--</div>-->

	<!--<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group ">-->

		<!--<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-label">-->
			<!--Contact Person-->
		<!--</div>-->

		<!--<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5 form-group">-->
			<!--<input type='text' class="form-control " name="contact_person" placeholder="Contact Person" ng-model="user['company'][20]['paramValue']" required>-->
		<!--</div>-->

	<!--</div>-->

	<!--<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group">-->

		<!--<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-label">-->
			<!--Contact Title-->
		<!--</div>-->

		<!--<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5 form-group">-->
			<!--<input type='text' class="form-control " name="contact_title" placeholder="Contact Title" ng-model="user['company'][21]['paramValue']" required>-->
		<!--</div>-->

	<!--</div>-->

	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group">

		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-label">
			Street Address*
		</div>

		<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5 form-group">
			<input type='text' class="form-control " onFocus="geolocate()" id="street_1" name="street_1" placeholder="street" ng-model="user.personal_information.street_1" required>
		</div>

	</div>

	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group">

		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-label">
			City*
		</div>

		<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5 form-group">
			<input type='text' class="form-control " name="city" data-geo="locality" placeholder="city" ng-model="user.personal_information.city" required>
		</div>

	</div>

	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group">

		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-label">
			State*
		</div>

		<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5 form-group">
			<input type='text' class="form-control " name="state" data-geo="administrative_area_level_1" placeholder="state" ng-model="user.personal_information.state" required>
		</div>

	</div>

	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group">

		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-label">
			Zip Code
		</div>

		<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5 form-group">
			<input type='text' class="form-control " name="zipcode" data-geo="postal_code"  placeholder="zipcode" ng-model="user.personal_information.zipcode" required>
		</div>

	</div>


<!---------------------------iterables---------------------------------iterables------------------------------------iterables------------------------------------------------------------------------------------------>

	<div >

		<div ng-hide="user.company.length > 0 ">
			<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group">
				<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-label">
					Main Field*
				</div>

				<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5 form-group">
					<input type='text' class="form-control " name="main_field" placeholder="Main Field"  required>
				</div>

				<div>
					<button type="button" class="btn btn-xs btn-default" ng-click="add('company',$index)">+ Add a Record</button>
				</div>
			</div>

		</div>
		<div ng-if="user.company.length > 0 ">
			<div ng-repeat="(a,b) in user.company">
				<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group">
					<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-label">
						Main Field*
					</div>

					<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5 form-group">
						<input type='text' class="form-control " name="main_field" placeholder="Main Field {{a+1}}" required>
					</div>

					<div ng-show="$last">
						<button type="button" class="btn btn-xs btn-default" ng-click="add('company',a)">+ Add a Record</button>
					</div>


					<div class="iterationCtrls" >
						<div class="iterationCtrl" ng-click="remove(user['company'],$index)">
							X Delete
						</div>
						<div class="iterationCtrl" ng-click="move(user['company'],$index,$index-1)">
							Move Up
						</div>
						<div class="iterationCtrl" ng-click="move(user['company'],$index,$index+1)">
							Move Down
						</div>
					</div>


				</div>
			</div>
		</div>

		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group">

			<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-label">
				Secondary Field
			</div>

			<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5 form-group">
				<input type='text' class="form-control " name="secondary_field" placeholder="Secondary Field" ng-model="user['company'][23]['paramValue']" required>
			</div>

			<div>
				<button type="button" class="btn btn-xs btn-default" ng-click="add('secondary_field',$index)">+ Add a Record</button>
			</div>
		</div>

	</div>
<!------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------>
	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group">
		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-label">
			Company YouTube Video
		</div>

		<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5 form-group">
			<input type='text' class="form-control " name="youtube" placeholder="YouTube" ng-model="user['company'][25]['paramValue']" required>
		</div>

	</div>

	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group">

		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-label">
			Short Company Description*
		</div>
		<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5 form-group">
			<textarea class="form-control " name="short_company_description" ng-model="user['company'][24]['paramValue']" rows="10" required></textarea>
		</div>

	</div>

	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group">

		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-label">
			Site Link
		</div>

		<div class="col-xs-12 col-sm-5 col-md-5 col-lg-5 form-group">
			<input type='text' class="form-control " name="site_link" placeholder="site_link" ng-model="user['company'][26]['paramValue']" required>
		</div>

	</div>




	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group">
		<h3 class="col-xs-12 col-sm-12 col-md-12 col-lg-12">User Information</h3>
	</div>




<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group">

		<div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 field-label">
			First Name*
		</div>

		<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 form-group"   ng-class="{'has-error' : errors['first_name'] && registerForm.first_name.$touched || errors['first_name'] && sent }" >
			<input type='text' class="form-control " name="first_name" placeholder="First Name" ng-model="user.personal_information.first_name"  ng-change="validate('first_name')"required>
		</div>

		<ul ng-if="registerForm['first_name'].$touched || sent">
			<li>{{errors.first_name}}</li>
		</ul>

	</div>

	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group">

		<div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 field-label">
			Last Name*
		</div>

		<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 form-group"  ng-class="{'has-error' : errors['last_name'] && registerForm.last_name.$touched || errors['last_name'] && sent }" >
			<input type='text' class="form-control " name="last_name" placeholder="Last Name" ng-model="user.personal_information.last_name"  ng-change="validate('last_name')" required>
		</div>

		<ul  ng-if="registerForm['last_name'].$touched || sent">
			<li>{{errors['last_name']}}</li>
		</ul>

	</div>

	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group">

		<div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 field-label">
			Phone/Cell*
		</div>

		<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 form-group" ng-class="{'has-error': errors.mobile}">
			<input type='text' class="form-control " name="mobile" placeholder="Phone/Cell" ng-model="user.personal_information.mobile" required>
		</div>

	</div>

	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group">

		<div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 field-label">
			E-mail*
		</div>

		<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 form-group"  ng-class="{'has-error' : errors['email'] && registerForm.email.$touched || errors['email'] && sent }" >
			<input type='email' class="form-control " name="email" placeholder="E-mail" ng-model="user.personal_information.email"  ng-change="validate('email')" required>
		</div>

		<ul  ng-if="registerForm['email'].$touched || sent">
			<li>{{errors['email']}}</li>
		</ul>

	</div>

	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group">

		<div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 field-label">
			Password*
		</div>

		<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 form-group" ng-class="{'has-error' : errors['password'] && registerForm.password.$touched || errors['password'] && sent }" >
			<input type='password' class="form-control " name="password" placeholder="Password" ng-model="user.personal_information.password"  ng-change="validate('password')" required>
		</div>

		<ul  ng-if="registerForm['password'].$touched || sent">
			<li>{{errors['password']}}</li>
		</ul>

	</div>

	<!--<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 field-group">-->

		<!--<div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 field-label">-->
			<!--Confirm Password*-->
		<!--</div>-->

		<!--<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 form-group" ng-class="{'has-error': errors.password_confirmation}">-->
			<!--<input type='password' class="form-control " name="password_confirmation" placeholder="Password" ng-model="user.personal_information.password_confirmation" required>-->
		<!--</div>-->

	<!--</div>-->

	<!-- <div>

		<div class=" col-md-2">
			Birthdate*
		</div>

		<div>
			<input type='date' class="form-control " name="date_of_birth" placeholder="Birthdate" ng-model="user.personal_information.date_of_birth" required>
		</div>

	</div>
	 -->

	<div class=" col-xs-12  col-sm-12 col-md-12 col-lg-12 field-group">

		<div class="" style="float:left;cursor:pointer;">
			<label style="cursor:pointer;padding-left:15px;">
				<input type="checkbox" class="" ng-model="user.personal_information.send_newsletters" style="width:15px;">
				I wish to receive newsletters with updates from time to time
			</label>
		</div>

	</div>


	<div class="field-group" style="padding-left:30px;" >
		<div class="modal-trigger disclaimerDiv col-xs-12 col-sm-8 col-md-9 col-lg-9" href='#disclaimer'>
			<ng-include class="" src="'../../../partials/disclaimer.html'"  ></ng-include>
		</div>
	</div>



	<!--expanded disclaimer-->
	<div id="disclaimer" class="disclaimerModal modal bottom-sheet">
		<div class="navbar-fixed" >
			<nav style="background-color:#5D2C87;">
				<div class="nav-wrapper">
					<a class="brand-logo" >Privacy Policy</a>

					<ul class="hide-on-med-and-down" style="width:25%;float:right;" >
						<li class="" >
							<a href=""  class="modal-action modal-close waves-effect waves-purple" ng-click="disclaimerOpen = false; user.personal_information.registration = true"  tooltipped  data-position="left" data-delay="100" data-tooltip="Please Read Everything First"><i class="glyphicon glyphicon-ok"></i>Agree</a>
						</li>
						<li>
							<a href="" class="modal-action modal-close waves-effect waves-purple" ng-click="disclaimerOpen = false; user.personal_information.registration = false"><i class="glyphicon glyphicon-remove"></i>Decline</a>
						</li>
					</ul>
				</div>
			</nav>
		</div>
		<div class="disclaimerModalContent" >
			<ng-include class="  col-xs-12 col-sm-12 col-md-12 col-lg-12" src="'../../../partials/disclaimer.html'"></ng-include>
		</div>
	</div>



	<div class=" col-xs-12  col-sm-12 col-md-12 col-lg-12 field-group">
		<div style="float:left;cursor:pointer;" class="form-group" >
			<label style="cursor:pointer;padding-left:15px;">
				<input type="checkbox" ng-model="user.personal_information.registration" name="registration" class=""  required>
				I have read and approved the disclaimer
			</label>
		</div>
	</div>


</div>





	<div ng-repeat="(key,val) in user['files']" class="formDiv" ng-hide="key == 'docParamId'">

		<div ng-show="docParam == 'files' ">
					<div class=" col-md-2" >
						{{key}}
					</div>

					<div style="height:200px;">
						<img ng-src="{{val.paramValue}}" style="width:200px;">
					</div>
					<div flow-init="flowOp(key)"
					     flow-files-submitted="$flow.upload()"
					     flow-file-added="!!{png:1,gif:1,jpg:1,jpeg:1}[$file.getExtension()]"
					     class="" >
 					 <br/>


 					 <div class="drop galleryDiv col-md-12" flow-drop ng-class="dropClass" flow-drag-enter="style={border:'1px solid #4E75AD'}" flow-drag-leave="style={border:'1px dashed blue'}" ng-style="style">

					    <p class="dragNdrop">Drag & Drop JPG, GIF or PNG Files Here!</p>

					    <div ng-repeat="file in $flow.files" class="gallery-box col-md-2">

					      <div class="thumbnail_title">{{file.name}}</div>
					      <div class="thumbnail" ng-show="$flow.files.length">
					       	  <img flow-img="file" />
							  <div class="progress progress-striped" ng-class="{active: file.isUploading()}">
								<div class="progress-bar" role="progressbar"
									 aria-valuenow="{{file.progress() * 100}}"
									 aria-valuemin="0"
									 aria-valuemax="100"
									 ng-style="{width: (file.progress() * 100) + '%'}">
								  <div class="sr-only">{{file.progress()}}% Complete</div>
								</div>
							  </div>
							  <div class="btn-group">
								<a class="btn btn-xs btn-danger delBtnBtn" ng-click="file.cancel()">
									<i class="delBtnIcon btn btn-default btn-xs glyphicon glyphicon-trash"></i>
								</a>
							  </div>
							  </div>

					    </div>

					    <div class="clear"></div>
					  </div>
				</div>
		</div>
	</div>




	<div class="col-md-4 col-md-offset-3" ng-if="nextDoc">
		<button  ng-click="signup(user,docParam)"  class="waves-effect waves-light btn-flat" ng-disabled="registerEmployerForm.$invalid"> Proceed To {{nextDoc | underscoreless | capitalize}} &nbsp <div class="glyphicon glyphicon-circle-arrow-right"></div> </button>
	</div>

	<div class="col-md-3 col-md-offset-3" ng-if="nextDoc==false">
		<a ui-sref="employer.company" class="waves-effect waves-light btn-flat"> Save &nbsp <div class="glyphicon glyphicon-circle-arrow-right"></div> </a>
    </div>


</main>
</form>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAdBZvkZDB2Q3lllTCO3RU7zvj7Bal-rVE&libraries=places&callback=initAutocomplete" async defer></script>
<script>

	var placeSearch, autocomplete;
	var componentForm = {
		street_number: 'short_name',
		route: 'long_name',
		locality: 'long_name',
		administrative_area_level_1: 'long_name',
		country: 'long_name',
		postal_code: 'short_name'
	};

	function initAutocomplete() {
		// Create the autocomplete object, restricting the search to geographical
		// location types.
		autocomplete = new google.maps.places.Autocomplete(
				/** @type {!HTMLInputElement} */(document.getElementById('street_1')),
				{types: ['geocode']});

		// When the user selects an address from the dropdown, populate the address
		// fields in the form.
		autocomplete.addListener('place_changed', fillInAddress);
	}

	// [START region_fillform]
	function fillInAddress() {
		// Get the place details from the autocomplete object.
		var place = autocomplete.getPlace();

		for (var component in componentForm) {

			$("[data-geo='"+component+"']").val('');
			$("[data-geo='"+component+"']").disabled = false;
			// document.getElementById(component).value = '';
			// document.getElementById(component).disabled = false;
		}

		// Get each component of the address from the place details
		// and fill the corresponding field on the form.
		for (var i = 0; i < place.address_components.length; i++) {

			var addressType = place.address_components[i].types[0];

			if (componentForm[addressType]) {
				var val = place.address_components[i][componentForm[addressType]];
				//document.getElementById(addressType).value = val;
				$("[data-geo='"+addressType+"']").val(val) ;

				if(addressType == 'administrative_area_level_1'){
					$("#state select").val(val) ;
				}
			}
		}
	}
	// [END region_fillform]

	// [START region_geolocation]
	// Bias the autocomplete object to the user's geographical location,
	// as supplied by the browser's 'navigator.geolocation' object.
	function geolocate() {
		if (navigator.geolocation) {
			navigator.geolocation.getCurrentPosition(function(position) {
				var geolocation = {
					lat: position.coords.latitude,
					lng: position.coords.longitude
				};
				var circle = new google.maps.Circle({
					center: geolocation,
					radius: position.coords.accuracy
				});
				autocomplete.setBounds(circle.getBounds());
			});
		}
	}
	// [END region_geolocation]

</script>
